!function(e){var t={};function n(r){if(t[r])return t[r].exports;var c=t[r]={i:r,l:!1,exports:{}};return e[r].call(c.exports,c,c.exports,n),c.l=!0,c.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var c in e)n.d(r,c,function(t){return e[t]}.bind(null,c));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=13)}([function(e,t){e.exports=require("react")},function(e,t){e.exports=require("@babel/runtime/helpers/slicedToArray")},function(e,t){e.exports=require("react-router-dom")},function(e,t){e.exports=require("react-redux")},function(e,t){e.exports=require("redux")},function(e,t){e.exports=require("@babel/runtime/helpers/defineProperty")},function(e,t){e.exports=require("@babel/runtime/helpers/toConsumableArray")},function(e,t){e.exports=require("react-icons")},function(e,t){e.exports=require("react-icons/fa")},function(e,t){e.exports=require("react-dom/server")},function(e,t){e.exports=require("@babel/runtime/helpers/extends")},function(e,t){e.exports=require("express")},function(e,t){e.exports=require("mongoose")},function(e,t,n){"use strict";n.r(t);var r=n(0),c=n.n(r),o=n(9),a=n(3),u=n(2),l=n(4),i=n(5),s=n.n(i),f=n(6),m=n.n(f),p="ADD_COUNTER",b="EDIT_COUNTER",d="REMOVE_COUNTER",v="START_COUNTING",O="STOP_COUNTING";function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case v:return[{isActive:!0,limit:t.limit,currentCount:0,dateStart:new Date}].concat(m()(e));case O:return e.map((function(e){return e.isActive?g({},e,{isActive:!1,currentCount:t.count}):e}));default:return e}};function j(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?j(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case p:return[{id:t.id,name:t.name,dateCreate:new Date,story:[]}].concat(m()(e));case b:return e.map((function(e){return e.id==t.id?h({},e,{name:t.name}):e}));case d:return e.filter((function(e){return e.id!=t.id}));case v:return e.map((function(e){return e.id==t.id?h({},e,{story:y([],t)}):e}));case O:return e.map((function(e){return e.id==t.id?h({},e,{story:y(e.story,t)}):e}));default:return e}},S=function(e){return function(t){return function(n){var r;return console.groupCollapsed("dispatching",n.type),console.log("prev state",e.getState()),console.log("action",n),r=t(n),console.log("next state",e.getState()),console.groupEnd(),r}}},P=function(e){return function(e){return function(t){return console.log("\n dispatching server action\n"),console.log(t),console.log("\n"),e(t)}}},C=function(e){return e?P:S},w=function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(l.applyMiddleware)(C)(l.createStore)(x,e)},N=n(1),T=n.n(N),D=Object(r.createContext)(),_=function(){var e=Object(r.useContext)(D);return c.a.createElement("span",null,Math.trunc(e/60/60),"h")},q=function(){var e=Object(r.useContext)(D);return c.a.createElement("span",null,Math.trunc(e/60)%60,"m")},k=function(){var e=Object(r.useContext)(D);return c.a.createElement("span",null,e%60,"s")},M=function(){return c.a.createElement("div",{className:"current-count"},c.a.createElement(_,null),c.a.createElement(q,null),c.a.createElement(k,null))},A=function(e,t){var n=Object(r.useRef)();Object(r.useEffect)((function(){n.current=e}),[e]),Object(r.useEffect)((function(){if(null!==t){var e=setInterval((function(){n.current()}),t);return function(){return clearInterval(e)}}}),[t])},I=function(){var e=Object(r.useState)(0),t=T()(e,2),n=t[0],o=t[1],a=Object(r.useState)(0),u=T()(a,1)[0],l=Object(r.useState)(!1),i=T()(l,2),s=i[0],f=i[1];A((function(){o(n+1)}),s?u:null);return c.a.createElement("div",null,c.a.createElement(D.Provider,{value:n},c.a.createElement(M,null)),c.a.createElement("button",{onClick:function(){f(!0)}},"start"),c.a.createElement("button",{onClick:function(){f(!1)}},"stop"),c.a.createElement("button",{onClick:function(){o(0)}},"clear"))},R=function(){return c.a.createElement("div",null,"404")},U=n(10),F=n.n(U),G=n(7),z=n(8),B=function(){var e=Object(r.useContext)(D);return c.a.createElement("span",null,Math.trunc(e/60/60),"h")},J=function(){var e=Object(r.useContext)(D);return c.a.createElement("span",null,Math.trunc(e/60)%60,"m")},K=function(){var e=Object(r.useContext)(D);return c.a.createElement("span",null,e%60,"s")},L=function(){return c.a.createElement("div",{className:"left-count"},c.a.createElement(B,null),c.a.createElement(J,null),c.a.createElement(K,null))},Q={1:0,2:9e4,3:18e4,4:36e4,5:18e5,6:36e5,7:54e5,8:72e5,9:18e6,10:36e6},V=function(e){var t=e.count,n=Object(r.useState)(0),o=T()(n,2),a=o[0],u=o[1],l=Object(r.useState)(0),i=T()(l,2),s=i[0],f=i[1],m=Object(r.useState)(0),p=T()(m,2),b=p[0],d=p[1],v=Object(r.useState)(0),O=T()(v,2),E=O[0],g=O[1];return Object(r.useEffect)((function(){var e;for(var n in Q)t>Q[n]&&(e=n);if(u(e),e<10){var r=+e+1,c=Math.trunc((t-Q[e])/(Q[r]-Q[e])*100);f(r),d(Q[r]-t),g(c)}else f("Max"),d(0),g(100)}),[]),c.a.createElement("div",{className:"progress-bar-block"},c.a.createElement(D.Provider,{value:t},c.a.createElement(M,null)),c.a.createElement("div",{className:"progress-bar"},c.a.createElement("div",{className:"bar",style:{width:"".concat(E,"%")}})),c.a.createElement("div",{className:"level-panel"},c.a.createElement("span",{className:"level"},a),c.a.createElement(D.Provider,{value:b},c.a.createElement(L,null)),c.a.createElement("span",{className:"level"},s)))},Y=Object(a.connect)(null,(function(e){return{}}))((function(e){var t=e.name,n=e.count,o=Object(r.useState)(n),a=T()(o,2),u=a[0],l=a[1],i=Object(r.useState)(1e3),s=T()(i,1)[0],f=Object(r.useState)(!1),m=T()(f,2),p=m[0],b=m[1];A((function(){l(u+1)}),p?s:null);return c.a.createElement("div",{className:"container flex-container "},c.a.createElement("span",{className:"title"},t),c.a.createElement(V,{count:u}),p?c.a.createElement(G.IconContext.Provider,{value:{color:"#6F4D46"}},c.a.createElement(z.FaStop,{onClick:function(){b(!1)},className:"btn"})):c.a.createElement(G.IconContext.Provider,{value:{color:"#6F4D46"}},c.a.createElement(z.FaPlay,{onClick:function(){console.log("Click"),b(!0)},className:"btn"})))})),H=Object(a.connect)((function(e){return{counts:e}}),null)((function(e){return e.counts.map((function(e,t){return c.a.createElement(Y,F()({key:t},e))}))})),W=function(){return c.a.createElement(u.Switch,null,c.a.createElement(u.Route,{exact:!0,path:"/test"},c.a.createElement(I,null)),c.a.createElement(u.Route,{exact:!0,path:"/"},c.a.createElement(H,null)),c.a.createElement(u.Route,null,c.a.createElement(R,null)))},X=n(11),Z=n(12),$=X(),ee=(X.json(),new(0,Z.Schema)({name:String,count:Number,dateCreate:Date,story:[{isActive:Boolean,limit:Number,currentCount:Number,dateStart:Date}]},{versionKey:!1})),te=Z.model("Timer",ee);Z.connect("mongodb://localhost:27017/time-counter",{useUnifiedTopology:!0,useNewUrlParser:!0}).then((function(){$.listen(3e3,(function(){console.log("Сервер ожидает подключения - http://localhost:3000/")}))})).catch((function(e){console.log(e)})),te.find({},(function(e,t){if(e)return console.log(e);console.log(t);var n,r=w(!0,t),i=Object(l.compose)((function(e){var t=e.html,n=e.state;return'\n  <!DOCTYPE html>\n  <html>\n  <head>\n  <meta charset="utf-8">\n  <title>Universal Color Organizer</title>\n  <link rel="stylesheet" href="style.css">\n  <link href="https://fonts.googleapis.com/css?family=Quantico&display=swap" rel="stylesheet">\n  </head>\n  <body>\n  <div id="root">'.concat(t,"</div>\n  <script>\n  window.__INITIAL_STATE__ = ").concat(JSON.stringify(n),'\n  <\/script>\n  <script src="/client.js"><\/script>\n  </body>\n  </html>\n  ')}),(function(e){var t=e.url,n=e.store;return{state:n.getState(),html:Object(o.renderToString)(c.a.createElement(a.Provider,{store:n},c.a.createElement(u.StaticRouter,{location:t,context:{}},c.a.createElement(W,null))))}}),(n=r,function(e){return{store:w(!1,n.getState()),url:e}}));$.get("/api/users",(function(e,t){User.find({},(function(e,n){if(e)return console.log(e);t.send(n)}))})),$.use(X.static("public")).use("/list",X.static("public")).use((function(e,t,n){console.log("".concat(e.method," request for '").concat(e.url,"'")),n()})).use((function(e,t,n){e.store=r,n()})).use((function(e,t){return t.status(200).send(i(e.url))}))}))}]);
//# sourceMappingURL=server.bundle.js.map