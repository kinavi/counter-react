require("source-map-support").install(),function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(r,a,function(t){return e[t]}.bind(null,a));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=10)}([function(e,t){e.exports=require("react")},function(e,t){e.exports=require("react-router-dom")},function(e,t){e.exports=require("react-redux")},function(e,t){e.exports=require("react-icons/fa")},function(e,t){e.exports=require("react-icons")},function(e,t){e.exports=require("redux")},function(e,t){e.exports=require("express")},function(e,t){e.exports=require("babel-polyfill")},function(e,t){e.exports=require("react-dom/server")},function(e,t){e.exports=require("redux-thunk")},function(e,t,n){n(7),e.exports=n(15)},function(e,t){e.exports=require("mongoose")},function(e,t){e.exports=require("cookie-parser")},function(e,t){e.exports=require("body-parser")},function(e,t){e.exports=require("babel-core/register")},function(e,t,n){"use strict";n.r(t);n(13);var r=n(0),a=n.n(r),o=n(8),c=n(2),i=n(1),u=n(5),l="ADD_COUNTER",s="EDIT_COUNTER",f="REMOVE_COUNTER",d="START_COUNTING",m="STOP_COUNTING",p=function(e){return e.json()},v=function(e){return console.error(e)};function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){h(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function E(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case l:return[].concat(E(e),[{_id:t._id,name:t.name,value:t.value,dateCreate:t.dateCreate}]);case f:return e.filter((function(e){return e._id!=t.id}));case s:return e.map((function(e){return e._id==t.id?b({},e,{name:t.name}):e}));case m:return e.map((function(e){return e._id==t.idCount?b({},e,{value:t.value}):e}));default:return e}};function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function j(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach((function(t){S(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function S(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function w(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case d:return[].concat(w(e),[{_id:t.id,idCount:t.idCount,isActive:t.isActive,limit:t.limit,dateStart:t.dateStart}]);case m:return e.map((function(e){return e._id==t.id?j({},e,{isActive:t.isActive,dateStop:t.dateStop}):e}));case f:return e.filter((function(e){return e.idCount!=t.id}));default:return e}},C=n(9),P=n.n(C);function A(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var N=function(e){return function(t){return function(n){var r;return console.groupCollapsed("dispatching",n.type),console.log("prev state",e.getState()),console.log("action",n),r=t(n),console.log("next state",e.getState()),console.groupEnd(),r}}},k=function(e){return function(e){return function(t){return console.log("\n dispatching server action\n"),console.log(t),console.log("\n"),e(t)}}},T=function(e){return[e?k:N,P.a]},D=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return u.applyMiddleware.apply(void 0,A(T(e)))(u.createStore)(Object(u.combineReducers)({"сounters":g,story:x}),t)},R=Object(r.createContext)(),I=n(3),_=n(4),F=function(){var e=Object(i.useHistory)();return a.a.createElement("div",{onClick:function(t){e.push("/"),t.stopPropagation()}},a.a.createElement(_.IconContext.Provider,{value:{color:"#DF9077"}},a.a.createElement(I.FaRegArrowAltCircleLeft,{className:"btn"})))},M=function(e){var t=e.onClick;return a.a.createElement(_.IconContext.Provider,{value:{color:"#6F4D46"}},a.a.createElement(I.FaPlay,{onClick:t,className:"btn-timer"}))},q=function(e){var t=e.onClick;return a.a.createElement(_.IconContext.Provider,{value:{color:"#6F4D46"}},a.a.createElement(I.FaStop,{onClick:t,className:"btn-timer"}))};function U(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,a=!1,o=void 0;try{for(var c,i=e[Symbol.iterator]();!(r=(c=i.next()).done)&&(n.push(c.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==i.return||i.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var L=Object(c.connect)(null,(function(e){return{onRemove:function(t){e(function(e){return function(t){return fetch("/api/remove",{method:"DELETE",body:JSON.stringify({id:e}),headers:{"Content-Type":"application/json"}}).then(p).then(t).catch(v)}}(t))}}}))((function(e){var t=e.onRemove,n=U(Object(r.useState)(!1),2),o=n[0],c=n[1],u=Object(i.useParams)().id,l=Object(i.useHistory)();return a.a.createElement("di",null,a.a.createElement(_.IconContext.Provider,{value:{color:"#DF9077"}},a.a.createElement(I.FaTimesCircle,{onClick:function(e){c(!0),e.stopPropagation()},className:"btn"})),a.a.createElement(G,{isOpen:o,onSubmit:function(e){t(u),e.stopPropagation(),l.push("/")},onCancel:function(e){c(!1),e.stopPropagation()}}))})),H=function(){var e=Object(r.useContext)(R);return a.a.createElement("span",null,Math.trunc(e/60/60),"h")},J=function(){var e=Object(r.useContext)(R);return a.a.createElement("span",null,Math.trunc(e/60)%60,"m")},B=function(){var e=Object(r.useContext)(R);return a.a.createElement("span",null,e%60,"s")},z=function(){return a.a.createElement("div",null,a.a.createElement(H,null),a.a.createElement(J,null),a.a.createElement(B,null))},G=function(e){var t=e.isOpen,n=e.onSubmit,r=e.onCancel;return t&&a.a.createElement("div",{className:"modal",onClick:r},a.a.createElement("div",{className:"modal-dialog",onClick:function(e){e.stopPropagation()}},a.a.createElement("div",{className:"modal-content"},a.a.createElement("div",{className:"modal-header"},a.a.createElement("h4",null,"Remove")),a.a.createElement("div",{className:"modal-body"},a.a.createElement("span",null,"Are you sure you want to remove?")),a.a.createElement("div",{className:"modal-footer"},a.a.createElement("button",{onClick:r},"Cancel"),a.a.createElement("button",{onClick:n},"Submit")))))};function K(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,a=!1,o=void 0;try{for(var c,i=e[Symbol.iterator]();!(r=(c=i.next()).done)&&(n.push(c.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==i.return||i.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var Y=Object(c.connect)(null,(function(e){return{onEdit:function(t,n){e(function(e,t){return function(n){return fetch("/api/edit",{method:"PUT",body:JSON.stringify({id:e,name:t}),headers:{"Content-Type":"application/json"}}).then(p).then(n).catch(v)}}(t,n))}}}))((function(e){var t=e.onEdit,n=Object(r.useRef)(null),o=K(Object(r.useState)(!1),2),c=o[0],u=o[1],l=Object(i.useParams)().id;return a.a.createElement("di",null,a.a.createElement(_.IconContext.Provider,{value:{color:"#DF9077"}},a.a.createElement(I.FaRegCircle,{onClick:function(e){u(!0),e.stopPropagation()},className:"btn"})),a.a.createElement(Q,{input:n,isOpen:c,onSubmit:function(e){t(l,n.current.value),e.stopPropagation(),u(!1)},onCancel:function(e){u(!1),e.stopPropagation()}}))})),Q=function(e){var t=e.input,n=e.isOpen,r=e.onSubmit,o=e.onCancel;return n&&a.a.createElement("div",{className:"modal",onClick:o},a.a.createElement("div",{className:"modal-dialog",onClick:function(e){e.stopPropagation()}},a.a.createElement("div",{className:"modal-content"},a.a.createElement("div",{className:"modal-header"},a.a.createElement("h4",null,"Edit")),a.a.createElement("div",{className:"modal-body"},a.a.createElement("span",null,"Enter a new title"),a.a.createElement("br",null),a.a.createElement("input",{ref:t,type:"text",size:"15",maxLength:"15"})),a.a.createElement("div",{className:"modal-footer"},a.a.createElement("button",{onClick:o},"Cancel"),a.a.createElement("button",{onClick:r},"Submit")))))},V=function(e,t){var n=Object(r.useRef)();Object(r.useEffect)((function(){n.current=e}),[e]),Object(r.useEffect)((function(){if(null!==t){var e=setInterval((function(){n.current()}),t);return function(){return clearInterval(e)}}}),[t])};function W(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,a=!1,o=void 0;try{for(var c,i=e[Symbol.iterator]();!(r=(c=i.next()).done)&&(n.push(c.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==i.return||i.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var X=function(){var e=W(Object(r.useState)(0),2),t=e[0],n=e[1],o=W(Object(r.useState)(0),1)[0],c=W(Object(r.useState)(!1),2),u=c[0],l=c[1];V((function(){n(t+1)}),u?o:null);return a.a.createElement("div",null,a.a.createElement(i.Route,{path:"/test/1"},a.a.createElement("div",null,"Hello")),a.a.createElement(R.Provider,{value:t},a.a.createElement(z,null)),a.a.createElement("button",{onClick:function(){l(!0)}},"start"),a.a.createElement("button",{onClick:function(){l(!1)}},"stop"),a.a.createElement("button",{onClick:function(){n(0)}},"clear"))};function Z(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var $={1:0,2:9e4,3:18e4,4:36e4,5:18e5,6:36e5,7:54e5,8:72e5,9:18e6,10:36e6},ee=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.level=this.getCurrentLevel(t),this.level<10?(this.nextLevel=this.getNextLevel(this.level),this.rest=this.getRest(t,this.nextLevel),this.percent=this.calculatePercent(t,this.level,this.nextLevel)):(this.level=10,this.nextLevel="max",this.rest=0,this.percent=100)}var t,n,r;return t=e,(n=[{key:"getCurrentLevel",value:function(e){var t=1;for(var n in $)e>=$[n]&&(t=n);return t}},{key:"getNextLevel",value:function(e){return+e+1}},{key:"getRest",value:function(e,t){return $[t]-e}},{key:"calculatePercent",value:function(e,t,n){return Math.trunc((e-$[t])/($[n]-$[t])*100)}}])&&Z(t.prototype,n),r&&Z(t,r),e}();function te(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,a=!1,o=void 0;try{for(var c,i=e[Symbol.iterator]();!(r=(c=i.next()).done)&&(n.push(c.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==i.return||i.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var ne=function(e){var t=e.count,n=te(Object(r.useState)(0),2),o=n[0],c=n[1],i=te(Object(r.useState)(0),2),u=i[0],l=i[1],s=te(Object(r.useState)(0),2),f=s[0],d=s[1],m=te(Object(r.useState)(0),2),p=m[0],v=m[1];return Object(r.useEffect)((function(){var e=new ee(t);c(e.level),l(e.nextLevel),d(e.rest),v(e.percent)}),[t]),a.a.createElement("div",{className:"container-progress-bar"},a.a.createElement("div",{className:"current-count"},a.a.createElement(R.Provider,{value:t},a.a.createElement(z,null))),a.a.createElement("div",{className:"bar-bg"},a.a.createElement("div",{className:"bar",style:{width:"".concat(p,"%")}})),a.a.createElement("div",{className:"level-panel"},a.a.createElement("span",{className:"level"},o),a.a.createElement("div",{className:"left-count"},a.a.createElement(R.Provider,{value:f},a.a.createElement(z,null))),a.a.createElement("span",{className:"level"},u)))};function re(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,a=!1,o=void 0;try{for(var c,i=e[Symbol.iterator]();!(r=(c=i.next()).done)&&(n.push(c.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==i.return||i.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var ae=Object(c.connect)((function(e){return{storys:e.story}}),(function(e){return{onStop:function(t,n,r,a){e(function(e,t,n,r){return function(a){return fetch("/api/stop",{method:"PUT",body:JSON.stringify({idCount:e,idStory:t,value:n,dateStop:r}),headers:{"Content-Type":"application/json"},credentials:"include"}).then(p).then(a).catch(v)}}(t,n,r,a))},onPlay:function(t,n){e(function(e,t){return function(n){return fetch("/api/start",{method:"PUT",body:JSON.stringify({id:e,dateStart:t}),headers:{"Content-Type":"application/json"},credentials:"include"}).then(p).then(n).catch(v)}}(t,n))}}}))((function(e){var t=e.storys,n=e._id,o=e.name,c=e.value,u=e.onStop,l=e.onPlay,s=re(Object(r.useState)(c),2),f=s[0],d=s[1],m=re(Object(r.useState)(1e3),1)[0],p=re(Object(r.useState)(!1),2),v=p[0],y=p[1],b=Object(i.useHistory)();Object(r.useEffect)((function(){var e=E();e&&h(e.dateStart)}),[]),V((function(){d(f+1)}),v?m:null);var h=function(e){d(O(f,g(e))),y(!0)},E=function(){return t.find((function(e){return e.idCount==n&&e.isActive}))},g=function(e){return Math.round((new Date-new Date(e))/1e3)},O=function(e,t){return+e+t};return a.a.createElement("div",{className:"timer ",onClick:function(e){b.push("/".concat(n)),e.stopPropagation()}},a.a.createElement("span",{className:"title"},o),a.a.createElement(ne,{count:f}),a.a.createElement("div",{className:"btn-start-timer"},v?a.a.createElement(q,{onClick:function(e){y(!1),u(n,E()._id,f,new Date),e.stopPropagation()}}):a.a.createElement(M,{onClick:function(e){y(!0),l(n,new Date),e.stopPropagation()}})))})),oe=function(e){return a.a.createElement("div",{className:"main-container"},e.children)},ce=function(e){return a.a.createElement("div",{className:"menu"},e.children,a.a.createElement(de,null))},ie=function(e){return a.a.createElement("div",{className:"counters-container"},e.children)},ue=function(e){return a.a.createElement("div",null,e.children)},le=function(){return a.a.createElement(i.Switch,null,a.a.createElement(i.Route,{path:"/:id"},a.a.createElement(oe,null,a.a.createElement(ce,null,a.a.createElement(F,null),a.a.createElement(Y,null),a.a.createElement(L,null)),a.a.createElement(ie,null,a.a.createElement(Oe,null),a.a.createElement(Se,null)),a.a.createElement(ue,null))),a.a.createElement(i.Route,{path:"/"},a.a.createElement(oe,null,a.a.createElement(ce,null),a.a.createElement(ie,null,a.a.createElement(be,null)),a.a.createElement(ue,null,a.a.createElement(ve,null)))))},se=function(){return a.a.createElement(i.Switch,null,a.a.createElement(i.Route,{exact:!0,path:"/exper"},a.a.createElement(de,null),a.a.createElement(X,null)),a.a.createElement(i.Route,{path:"/"},a.a.createElement(le,null)))};function fe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,a=!1,o=void 0;try{for(var c,i=e[Symbol.iterator]();!(r=(c=i.next()).done)&&(n.push(c.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==i.return||i.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var de=function(){var e=function(e){var t=fe(Object(r.useState)(e),2),n=t[0],a=t[1];Object(r.useEffect)((function(){var e=setInterval((function(){return o()}),1e3);return function(){clearInterval(e)}}));var o=function(){a(new Date)};return n}(new Date);return a.a.createElement("div",{className:"container-clock"},a.a.createElement("div",null,e.getHours()<10?"0".concat(e.getHours()):e.getHours().toLocaleString()),a.a.createElement("div",null,":"),a.a.createElement("div",null,e.getMinutes()<10?"0".concat(e.getMinutes()):e.getMinutes().toLocaleString()))},me=Object(c.connect)(null,(function(e){return{onAdd:function(t){e(function(e){return function(t){return fetch("/api/add",{method:"POST",body:JSON.stringify({name:e}),headers:{"Content-Type":"application/json"}}).then(p).then(t).catch(v)}}(t))}}}))((function(e){var t=e.onAdd,n=e.onHideAddForm,o=Object(r.useRef)(null);return a.a.createElement("div",{className:"container-add-form"},a.a.createElement("div",{className:"title"},"Title"),a.a.createElement("input",{className:"field-input",ref:o}),a.a.createElement(_.IconContext.Provider,{value:{color:"#6F4D46"}},a.a.createElement(I.FaPlus,{className:"btn-add",onClick:function(){n(),t(o.current.value)}})))}));function pe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,a=!1,o=void 0;try{for(var c,i=e[Symbol.iterator]();!(r=(c=i.next()).done)&&(n.push(c.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==i.return||i.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var ve=function(){var e=pe(Object(r.useState)(!1),2),t=e[0],n=e[1],o=function(){n(!1)};return t&&a.a.createElement("div",null,a.a.createElement(me,{onHideAddForm:o}),a.a.createElement(_.IconContext.Provider,{value:{color:"#DF9077"}},a.a.createElement(I.FaMinusCircle,{className:"btn",onClick:o})))||a.a.createElement(_.IconContext.Provider,{value:{color:"#DF9077"}},a.a.createElement(I.FaPlusCircle,{className:"btn",onClick:function(){n(!0)}}))};function ye(){return(ye=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var be=Object(c.connect)((function(e){return{counts:e.сounters}}),null)((function(e){var t=e.counts;return a.a.createElement("div",null,t.map((function(e,t){return a.a.createElement(ae,ye({key:t},e))})))}));function he(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,a=!1,o=void 0;try{for(var c,i=e[Symbol.iterator]();!(r=(c=i.next()).done)&&(n.push(c.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==i.return||i.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var Ee=function(e){var t=e.count,n=e.limit,o=he(Object(r.useState)(0),2),c=o[0],i=o[1],u=function(){return Math.trunc(t/n*100)};return Object(r.useEffect)((function(){i(u)}),[t,n]),a.a.createElement("div",{className:"bar-bg"},a.a.createElement("div",{className:"bar",style:{width:"".concat(c,"%")}}))};function ge(){return(ge=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var Oe=Object(c.connect)((function(e){return{counts:e.сounters}}),null)((function(e){var t=e.counts,n=Object(i.useParams)().id,r=t.filter((function(e){return e._id==n}));return a.a.createElement("div",null,r.map((function(e,t){return a.a.createElement(ae,ge({key:t},e))})))}));function je(){return(je=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var Se=Object(c.connect)((function(e){return{storys:e.story}}),null)((function(e){var t=e.storys,n=Object(i.useParams)().id,r=t.filter((function(e){return n==e.idCount}));return a.a.createElement("div",{className:"container-story"},r.map((function(e,t){return a.a.createElement(xe,je({key:t},e))})))}));function we(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,a=!1,o=void 0;try{for(var c,i=e[Symbol.iterator]();!(r=(c=i.next()).done)&&(n.push(c.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==i.return||i.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var xe=function(e){var t=e.isActive,n=e.limit,o=e.dateStart,c=e.dateStop,i=we(Object(r.useState)(0),2),u=i[0],l=i[1];return Object(r.useEffect)((function(){t||l(Math.trunc((new Date(c)-new Date(o))/1e3))}),[o,c,t]),!t&&a.a.createElement("div",{className:"story"},a.a.createElement("div",{className:"container-bar-story"},a.a.createElement(Ee,{count:u,limit:n})),a.a.createElement("div",{className:"container-info-story"},a.a.createElement(R.Provider,{value:u},a.a.createElement(J,null),a.a.createElement(B,null)),a.a.createElement("div",{className:"container-date-story"},a.a.createElement("span",null,new Date(o).getDate()),a.a.createElement("span",null,"."),a.a.createElement("span",null,new Date(o).getMonth()),a.a.createElement("span",null,"."),a.a.createElement("span",null,new Date(o).getUTCFullYear())),a.a.createElement(R.Provider,{value:n},a.a.createElement(J,null))))},Ce=n(6);function Pe(e,t,n,r,a,o,c){try{var i=e[o](c),u=i.value}catch(e){return void n(e)}i.done?t(u):Promise.resolve(u).then(r,a)}function Ae(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function c(e){Pe(o,r,a,c,i,"next",e)}function i(e){Pe(o,r,a,c,i,"throw",e)}c(void 0)}))}}var Ne=n(6);n(14),n(7);var ke=Ne.json(),Te=Object(Ce.Router)(),De=function(e,t,n){e.store.dispatch(n),t.status(200).json(n)};Te.post("/add",ke,function(){var e=Ae(regeneratorRuntime.mark((function e(t,n){var r,a,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t.body){e.next=3;break}return e.abrupt("return",n.sendStatus(400));case 3:return r=t.body.name,a=new Be({name:r,value:0,dateCreate:new Date}),e.next=7,a.save();case 7:o=e.sent,De(t,n,{type:l,_id:o._id,name:o.name,value:o.value,dateCreate:o.dateCreate}),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),console.log("Error --\x3e ",e.t0),n.sendStatus(500).send(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,n){return e.apply(this,arguments)}}()),Te.put("/start",ke,function(){var e=Ae(regeneratorRuntime.mark((function e(t,n){var r,a,o,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t.body){e.next=3;break}return e.abrupt("return",n.sendStatus(400));case 3:return r=t.body.id,a=t.body.dateStart,o=new ze({idCount:r,isActive:!0,limit:2700,dateStart:a}),e.next=8,o.save();case 8:c=e.sent,De(t,n,{type:d,id:c._id,idCount:c.idCount,isActive:!0,limit:2700,dateStart:c.dateStart}),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(0),console.log("Error --\x3e ",e.t0),t.sendStatus(500).send(e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t,n){return e.apply(this,arguments)}}()),Te.put("/stop",ke,function(){var e=Ae(regeneratorRuntime.mark((function e(t,n){var r,a,o,c,i,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t.body){e.next=3;break}return e.abrupt("return",n.sendStatus(400));case 3:return r=t.body.idStory,a=t.body.dateStop,o=t.body.idCount,c=t.body.value,e.next=9,ze.findByIdAndUpdate(r,{isActive:!1,dateStop:a},{new:!0});case 9:return i=e.sent,e.next=12,Be.findByIdAndUpdate(o,{value:c},{new:!0});case 12:u=e.sent,De(t,n,{type:m,id:i._id,isActive:i.isActive,dateStop:i.dateStop,idCount:u._id,value:u.value}),e.next=20;break;case 16:e.prev=16,e.t0=e.catch(0),console.log("Error --\x3e ",e.t0),t.sendStatus(500).send(e.t0);case 20:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(t,n){return e.apply(this,arguments)}}()),Te.delete("/remove",ke,function(){var e=Ae(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t.body){e.next=3;break}return e.abrupt("return",n.sendStatus(400));case 3:return r=t.body.id,e.next=6,Be.deleteOne({_id:r});case 6:return e.next=8,ze.deleteMany({idCount:r});case 8:De(t,n,{type:f,id:r}),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),console.log("Error --\x3e ",e.t0),t.sendStatus(500).send(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,n){return e.apply(this,arguments)}}()),Te.put("/edit",ke,function(){var e=Ae(regeneratorRuntime.mark((function e(t,n){var r,a,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t.body){e.next=3;break}return e.abrupt("return",n.sendStatus(400));case 3:return r=t.body.id,a=t.body.name,e.next=7,Be.findByIdAndUpdate(r,{name:a},{new:!0});case 7:o=e.sent,console.log("result -",o),De(t,n,{type:s,id:o._id,name:o.name}),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(0),console.log("Error --\x3e ",e.t0),t.sendStatus(500).send(e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t,n){return e.apply(this,arguments)}}());var Re=Te;function Ie(e,t,n,r,a,o,c){try{var i=e[o](c),u=i.value}catch(e){return void n(e)}i.done?t(u):Promise.resolve(u).then(r,a)}function _e(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function c(e){Ie(o,r,a,c,i,"next",e)}function i(e){Ie(o,r,a,c,i,"throw",e)}c(void 0)}))}}n.d(t,"Count",(function(){return Be})),n.d(t,"Story",(function(){return ze}));var Fe=n(6),Me=n(11),qe=n(12),Ue=Fe(),Le=(Fe.json(),Me.Schema),He=new Le({name:String,value:Number,dateCreate:Date,isHide:Boolean},{versionKey:!1}),Je=new Le({idCount:String,isActive:Boolean,limit:Number,dateStart:Date,dateStop:Date},{versionKey:!1}),Be=Me.model("Count",He),ze=Me.model("Story",Je);Me.connect("mongodb://localhost:27017/counter-react",{useUnifiedTopology:!0,useNewUrlParser:!0}).then((function(){Ue.listen(3e3,(function(){console.log("Сервер ожидает подключения - http://localhost:3000/")}))})).catch((function(e){console.log(e)}));var Ge=function(){var e=_e(regeneratorRuntime.mark((function e(t,n,r){var a,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Be.find({});case 2:return a=e.sent,e.next=5,ze.find({});case 5:o=e.sent,t.store=D(!0,{"сounters":a,story:o}),r();case 8:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),Ke=Object(u.compose)((function(e){var t=e.html,n=e.state;return'\n  <!DOCTYPE html>\n  <html>\n  <head>\n  <meta charset="utf-8">\n  <title>Universal Color Organizer</title>\n  <link rel="stylesheet" href="style.css">\n  <link href="https://fonts.googleapis.com/css?family=Quantico&display=swap" rel="stylesheet">\n  </head>\n  <body>\n  <div id="root">'.concat(t,"</div>\n  <script>\n  window.__INITIAL_STATE__ = ").concat(JSON.stringify(n),'\n  <\/script>\n  <script src="/client.js"><\/script>\n  </body>\n  </html>\n  ')}),(function(e){var t=e.url,n=e.store;return{state:n.getState(),html:Object(o.renderToString)(a.a.createElement(c.Provider,{store:n},a.a.createElement(i.StaticRouter,{location:t,context:{}},a.a.createElement(se,null))))}}),(function(e,t,n){return{store:D(!1,{"сounters":t,story:n}),url:e}})),Ye=function(){var e=_e(regeneratorRuntime.mark((function e(t,n){var r,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Be.find({});case 2:return r=e.sent,e.next=5,ze.find({});case 5:return a=e.sent,e.abrupt("return",n.status(200).send(Ke(t.url,r,a)));case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();Ue.get("/api/users",(function(e,t){User.find({},(function(e,n){if(e)return console.log(e);t.send(n)}))})),Ue.use(Fe.static("public")).use(qe()).use((function(e,t,n){console.log("".concat(e.method," request for '").concat(e.url,"'")),n()})).use(Ge).use("/api",Re).use(Ye)}]);
//# sourceMappingURL=server.bundle.js.map