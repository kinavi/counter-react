require("source-map-support").install(),function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(r,a,function(t){return e[t]}.bind(null,a));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=11)}([function(e,t){e.exports=require("react")},function(e,t){e.exports=require("react-router-dom")},function(e,t){e.exports=require("react-redux")},function(e,t){e.exports=require("react-icons/fa")},function(e,t){e.exports=require("react-icons")},function(e,t){e.exports=require("redux")},function(e,t){e.exports=require("express")},function(e,t){e.exports=require("babel-polyfill")},function(e,t){e.exports=require("react-router")},function(e,t){e.exports=require("react-dom/server")},function(e,t){e.exports=require("redux-thunk")},function(e,t,n){n(7),e.exports=n(16)},function(e,t){e.exports=require("mongoose")},function(e,t){e.exports=require("cookie-parser")},function(e,t){e.exports=require("body-parser")},function(e,t){e.exports=require("babel-core/register")},function(e,t,n){"use strict";n.r(t);n(14);var r=n(0),a=n.n(r),o=n(9),c=n(2),i=n(1),u=n(5),l="ADD_TIMER",s="START_COUNTING",f="STOP_COUNTING",d=function(e){return e.json()},m=function(e){return console.error(e)};function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){y(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function b(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case l:return[].concat(b(e),[{_id:t._id,name:t.name,count:t.count,dateCreate:t.dateCreate}]);case f:return e.map((function(e){return e._id==t.idTime?v({},e,{count:t.count}):e}));default:return e}};function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(Object(n),!0).forEach((function(t){O(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function O(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function j(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case s:return[].concat(j(e),[{_id:t.id,idTimer:t.idTimer,isActive:t.isActive,limit:t.limit,dateStart:t.dateStart}]);case f:return e.map((function(e){return e._id==t.id?g({},e,{isActive:t.isActive,dateStop:t.dateStop}):e}));default:return e}},w=n(10),x=n.n(w);function A(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var P=function(e){return function(t){return function(n){var r;return console.groupCollapsed("dispatching",n.type),console.log("prev state",e.getState()),console.log("action",n),r=t(n),console.log("next state",e.getState()),console.groupEnd(),r}}},T=function(e){return function(e){return function(t){return console.log("\n dispatching server action\n"),console.log(t),console.log("\n"),e(t)}}},C=function(e){return[e?T:P,x.a]},N=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return u.applyMiddleware.apply(void 0,A(C(e)))(u.createStore)(Object(u.combineReducers)({"сounters":h,story:S}),t)},k=Object(r.createContext)(),D=function(){var e=Object(r.useContext)(k);return a.a.createElement("span",null,Math.trunc(e/60/60),"h")},I=function(){var e=Object(r.useContext)(k);return a.a.createElement("span",null,Math.trunc(e/60)%60,"m")},_=function(){var e=Object(r.useContext)(k);return a.a.createElement("span",null,e%60,"s")},R=function(){return a.a.createElement("div",{className:"current-count"},a.a.createElement(D,null),a.a.createElement(I,null),a.a.createElement(_,null))},M=function(e,t){var n=Object(r.useRef)();Object(r.useEffect)((function(){n.current=e}),[e]),Object(r.useEffect)((function(){if(null!==t){var e=setInterval((function(){n.current()}),t);return function(){return clearInterval(e)}}}),[t])};function q(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,a=!1,o=void 0;try{for(var c,i=e[Symbol.iterator]();!(r=(c=i.next()).done)&&(n.push(c.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==i.return||i.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var F=function(){var e=q(Object(r.useState)(0),2),t=e[0],n=e[1],o=q(Object(r.useState)(0),1)[0],c=q(Object(r.useState)(!1),2),u=c[0],l=c[1];M((function(){n(t+1)}),u?o:null);return a.a.createElement("div",null,a.a.createElement(i.Route,{path:"/test/1"},a.a.createElement("div",null,"Hello")),a.a.createElement(k.Provider,{value:t},a.a.createElement(R,null)),a.a.createElement("button",{onClick:function(){l(!0)}},"start"),a.a.createElement("button",{onClick:function(){l(!1)}},"stop"),a.a.createElement("button",{onClick:function(){n(0)}},"clear"))},U=function(){var e=Object(r.useContext)(k);return a.a.createElement("span",null,Math.trunc(e/60/60),"h")},H=function(){var e=Object(r.useContext)(k);return a.a.createElement("span",null,Math.trunc(e/60)%60,"m")},B=function(){var e=Object(r.useContext)(k);return a.a.createElement("span",null,e%60,"s")},J=function(){return a.a.createElement("div",{className:"left-count"},a.a.createElement(U,null),a.a.createElement(H,null),a.a.createElement(B,null))},L={1:0,2:9e4,3:18e4,4:36e4,5:18e5,6:36e5,7:54e5,8:72e5,9:18e6,10:36e6};function G(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,a=!1,o=void 0;try{for(var c,i=e[Symbol.iterator]();!(r=(c=i.next()).done)&&(n.push(c.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==i.return||i.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var K=function(e){var t=e.count,n=G(Object(r.useState)(0),2),o=n[0],c=n[1],i=G(Object(r.useState)(0),2),u=i[0],l=i[1],s=G(Object(r.useState)(0),2),f=s[0],d=s[1],m=G(Object(r.useState)(0),2),p=m[0],v=m[1];return Object(r.useEffect)((function(){var e;for(var n in L)t>L[n]&&(e=n);if(c(e),e<10){var r=+e+1,a=Math.trunc((t-L[e])/(L[r]-L[e])*100);l(r),d(L[r]-t),v(a)}else 0==t?(c(1),l(2),d(L[2])):(l("Max"),d(0),v(100))}),[t]),a.a.createElement("div",{className:"container-progress-bar"},a.a.createElement(k.Provider,{value:t},a.a.createElement(R,null)),a.a.createElement("div",{className:"bar-bg"},a.a.createElement("div",{className:"bar",style:{width:"".concat(p,"%")}})),a.a.createElement("div",{className:"level-panel"},a.a.createElement("span",{className:"level"},o),a.a.createElement(k.Provider,{value:f},a.a.createElement(J,null)),a.a.createElement("span",{className:"level"},u)))},Y=n(3),z=n(4),Q=function(){var e=Object(i.useHistory)();return a.a.createElement("div",{onClick:function(t){e.push("/"),t.stopPropagation()}},a.a.createElement(z.IconContext.Provider,{value:{color:"#DF9077"}},a.a.createElement(Y.FaRegArrowAltCircleLeft,{className:"btn"})))},V=function(e){var t=e.onClick;return a.a.createElement(z.IconContext.Provider,{value:{color:"#6F4D46"}},a.a.createElement(Y.FaPlay,{onClick:t,className:"btn-timer"}))},W=function(e){var t=e.onClick;return a.a.createElement(z.IconContext.Provider,{value:{color:"#6F4D46"}},a.a.createElement(Y.FaStop,{onClick:t,className:"btn-timer"}))};function X(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,a=!1,o=void 0;try{for(var c,i=e[Symbol.iterator]();!(r=(c=i.next()).done)&&(n.push(c.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==i.return||i.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var Z=Object(c.connect)((function(e){return{storys:e.story}}),(function(e){return{onStop:function(t,n,r,a){e(function(e,t,n,r){return function(a){return fetch("/api/stop",{method:"PUT",body:JSON.stringify({id:e,idStory:t,count:n,dateStop:r}),headers:{"Content-Type":"application/json"},credentials:"include"}).then(d).then(a).catch(m)}}(t,n,r,a))},onPlay:function(t,n){e(function(e,t){return function(n){return fetch("/api/start",{method:"PUT",body:JSON.stringify({id:e,dateStart:t}),headers:{"Content-Type":"application/json"},credentials:"include"}).then(d).then(n).catch(m)}}(t,n))}}}))((function(e){var t=e.storys,n=e._id,o=e.name,c=e.count,u=e.onStop,l=e.onPlay,s=X(Object(r.useState)(c),2),f=s[0],d=s[1],m=X(Object(r.useState)(1e3),1)[0],p=X(Object(r.useState)(!1),2),v=p[0],y=p[1],b=Object(i.useHistory)();Object(r.useEffect)((function(){var e=E();e&&h(e.dateStart)}),[]),M((function(){d(f+1)}),v?m:null);var h=function(e){d(O(f,g(e))),y(!0)},E=function(){return t.find((function(e){return e.idTimer==n&&e.isActive}))},g=function(e){return Math.round((new Date-new Date(e))/1e3)},O=function(e,t){return+e+t};return a.a.createElement("div",{className:"timer ",onClick:function(e){b.push("/".concat(n)),e.stopPropagation()}},a.a.createElement("span",{className:"title"},o),a.a.createElement(K,{count:f}),a.a.createElement("div",{className:"btn-start-timer"},v?a.a.createElement(W,{onClick:function(e){y(!1),u(n,E()._id,f,new Date),e.stopPropagation()}}):a.a.createElement(V,{onClick:function(e){y(!0),l(n,new Date),e.stopPropagation()}})))})),$=function(e){return a.a.createElement("div",{className:"main-container"},e.children)},ee=function(e){return a.a.createElement("div",{className:"menu"},e.children,a.a.createElement(ce,null))},te=function(e){return a.a.createElement("div",{className:"counters-container"},e.children)},ne=function(e){return a.a.createElement("div",null,e.children)},re=function(){return a.a.createElement(i.Switch,null,a.a.createElement(i.Route,{path:"/:id"},a.a.createElement($,null,a.a.createElement(ee,null,a.a.createElement(Q,null)),a.a.createElement(te,null,a.a.createElement(ye,null),a.a.createElement(he,null)),a.a.createElement(ne,null))),a.a.createElement(i.Route,{path:"/"},a.a.createElement($,null,a.a.createElement(ee,null),a.a.createElement(te,null,a.a.createElement(fe,null)),a.a.createElement(ne,null,a.a.createElement(le,null)))))},ae=function(){return a.a.createElement(i.Switch,null,a.a.createElement(i.Route,{exact:!0,path:"/exper"},a.a.createElement(ce,null),a.a.createElement(F,null)),a.a.createElement(i.Route,{path:"/"},a.a.createElement(re,null)))};function oe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,a=!1,o=void 0;try{for(var c,i=e[Symbol.iterator]();!(r=(c=i.next()).done)&&(n.push(c.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==i.return||i.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var ce=function(){var e=function(e){var t=oe(Object(r.useState)(e),2),n=t[0],a=t[1];Object(r.useEffect)((function(){var e=setInterval((function(){return o()}),1e3);return function(){clearInterval(e)}}));var o=function(){a(new Date)};return n}(new Date);return a.a.createElement("div",{className:"container-clock"},a.a.createElement("div",null,e.getHours()<10?"0".concat(e.getHours()):e.getHours().toLocaleString()),a.a.createElement("div",null,":"),a.a.createElement("div",null,e.getMinutes()<10?"0".concat(e.getMinutes()):e.getMinutes().toLocaleString()))},ie=Object(c.connect)(null,(function(e){return{onAdd:function(t){e(function(e){return function(t){return fetch("/api/add",{method:"POST",body:JSON.stringify({title:e}),headers:{"Content-Type":"application/json"}}).then(d).then(t).catch(m)}}(t)),console.log(t)}}}))((function(e){var t=e.onAdd,n=e.HideAddForm,o=Object(r.useRef)(null);return a.a.createElement("div",{className:"container-add-form"},a.a.createElement("div",{className:"title"},"Title"),a.a.createElement("input",{className:"field-input",ref:o}),a.a.createElement(z.IconContext.Provider,{value:{color:"#6F4D46"}},a.a.createElement(Y.FaPlus,{className:"btn-add",onClick:function(){n(),t(o.current.value)}})))}));function ue(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,a=!1,o=void 0;try{for(var c,i=e[Symbol.iterator]();!(r=(c=i.next()).done)&&(n.push(c.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==i.return||i.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var le=function(){var e=ue(Object(r.useState)(!1),2),t=e[0],n=e[1],o=function(){n(!1)};return t&&a.a.createElement("div",null,a.a.createElement(ie,{HideAddForm:o}),a.a.createElement(z.IconContext.Provider,{value:{color:"#DF9077"}},a.a.createElement(Y.FaMinusCircle,{className:"btn",onClick:o})))||a.a.createElement(z.IconContext.Provider,{value:{color:"#DF9077"}},a.a.createElement(Y.FaPlusCircle,{className:"btn",onClick:function(){n(!0)}}))};function se(){return(se=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var fe=Object(c.connect)((function(e){return{counts:e.сounters}}),null)((function(e){var t=e.counts;return a.a.createElement("div",null,t.map((function(e,t){return a.a.createElement(Z,se({key:t},e))})))}));n(8);function de(){return(de=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}Object(c.connect)((function(e){return{storys:e.story}}),(function(e){return{}}))((function(e){var t=e.parentId,n=e.storys.filter((function(e){return t==e.idTimer}));return a.a.createElement("div",{className:"container-story"},n.map((function(e,t){return a.a.createElement(ge,de({key:t},e))})))}));function me(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,a=!1,o=void 0;try{for(var c,i=e[Symbol.iterator]();!(r=(c=i.next()).done)&&(n.push(c.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==i.return||i.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var pe=function(e){var t=e.count,n=e.limit,o=me(Object(r.useState)(0),2),c=o[0],i=o[1];return Object(r.useEffect)((function(){var e=Math.trunc(t/n*100);i(e)}),[t,n]),a.a.createElement("div",{className:"bar-bg"},a.a.createElement("div",{className:"bar",style:{width:"".concat(c,"%")}}))};function ve(){return(ve=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var ye=Object(c.connect)((function(e){return{counts:e.сounters}}),null)((function(e){var t=e.counts,n=Object(i.useParams)().id,r=t.filter((function(e){return e._id==n}));return a.a.createElement("div",null,r.map((function(e,t){return a.a.createElement(Z,ve({key:t},e))})))}));function be(){return(be=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var he=Object(c.connect)((function(e){return{storys:e.story}}),null)((function(e){var t=e.storys,n=Object(i.useParams)().id,r=t.filter((function(e){return n==e.idTimer}));return a.a.createElement("div",{className:"container-story"},r.map((function(e,t){return a.a.createElement(ge,be({key:t},e))})))}));function Ee(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,a=!1,o=void 0;try{for(var c,i=e[Symbol.iterator]();!(r=(c=i.next()).done)&&(n.push(c.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==i.return||i.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var ge=function(e){e._id,e.idTimer;var t=e.isActive,n=e.limit,o=e.dateStart,c=e.dateStop,i=Ee(Object(r.useState)(0),2),u=i[0],l=i[1];return Object(r.useEffect)((function(){if(!t){var e=Math.trunc((new Date(c)-new Date(o))/1e3);l(e)}}),[o,c,t]),!t&&a.a.createElement("div",{className:"story"},a.a.createElement("div",{className:"container-bar-story"},a.a.createElement(pe,{count:u,limit:n})),a.a.createElement("div",{className:"container-info-story"},a.a.createElement("span",null,u," sec"),a.a.createElement("div",{className:"container-date-story"},a.a.createElement("span",null,new Date(o).getDate()),a.a.createElement("span",null,"."),a.a.createElement("span",null,new Date(o).getMonth()),a.a.createElement("span",null,"."),a.a.createElement("span",null,new Date(o).getUTCFullYear())),a.a.createElement("span",null,n/60," min")))},Oe=n(6);function je(e,t,n,r,a,o,c){try{var i=e[o](c),u=i.value}catch(e){return void n(e)}i.done?t(u):Promise.resolve(u).then(r,a)}function Se(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function c(e){je(o,r,a,c,i,"next",e)}function i(e){je(o,r,a,c,i,"throw",e)}c(void 0)}))}}var we=n(6);n(15),n(7);var xe=we.json(),Ae=Object(Oe.Router)(),Pe=function(e,t,n){e.store.dispatch(n),t.status(200).json(n)};Ae.post("/add",xe,function(){var e=Se(regeneratorRuntime.mark((function e(t,n){var r,a,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.body){e.next=2;break}return e.abrupt("return",n.sendStatus(400));case 2:return r=t.body.title,a=new Fe({name:r,count:0,dateCreate:new Date}),e.prev=4,e.next=7,a.save();case 7:o=e.sent,Pe(t,n,{type:l,_id:o._id,name:o.name,count:o.count,dateCreate:o.dateCreate}),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(4),console.log("Error --\x3e ",e.t0),n.sendStatus(500).send(e.t0);case 15:case"end":return e.stop()}}),e,null,[[4,11]])})));return function(t,n){return e.apply(this,arguments)}}()),Ae.put("/start",xe,function(){var e=Se(regeneratorRuntime.mark((function e(t,n){var r,a,o,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,console.log("start"),t.body){e.next=4;break}return e.abrupt("return",n.sendStatus(400));case 4:return r=t.body.id,a=t.body.dateStart,o=new Ue({idTimer:r,isActive:!0,limit:2700,dateStart:a}),e.next=9,o.save();case 9:c=e.sent,n.cookie("idActiveNote",c._id),Pe(t,n,{type:s,id:c._id,idTimer:c.idTimer,isActive:!0,limit:2700,dateStart:c.dateStart}),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(0),console.log("Error --\x3e ",e.t0),t.sendStatus(500).send(e.t0);case 18:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t,n){return e.apply(this,arguments)}}()),Ae.put("/stop",xe,function(){var e=Se(regeneratorRuntime.mark((function e(t,n){var r,a,o,c,i,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,console.log("stop"),t.body){e.next=4;break}return e.abrupt("return",n.sendStatus(400));case 4:return r=t.body.idStory,a=t.body.dateStop,o=t.body.id,c=t.body.count,e.next=10,Ue.findByIdAndUpdate(r,{isActive:!1,dateStop:a},{new:!0});case 10:return i=e.sent,e.next=13,Fe.findByIdAndUpdate(o,{count:c},{new:!0});case 13:u=e.sent,Pe(t,n,{type:f,id:i._id,isActive:i.isActive,dateStop:i.dateStop,idTime:u._id,count:u.count}),e.next=21;break;case 17:e.prev=17,e.t0=e.catch(0),console.log("Error --\x3e ",e.t0),t.sendStatus(500).send(e.t0);case 21:case"end":return e.stop()}}),e,null,[[0,17]])})));return function(t,n){return e.apply(this,arguments)}}());var Te=Ae;function Ce(e,t,n,r,a,o,c){try{var i=e[o](c),u=i.value}catch(e){return void n(e)}i.done?t(u):Promise.resolve(u).then(r,a)}function Ne(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function c(e){Ce(o,r,a,c,i,"next",e)}function i(e){Ce(o,r,a,c,i,"throw",e)}c(void 0)}))}}n.d(t,"Timer",(function(){return Fe})),n.d(t,"Story",(function(){return Ue}));var ke=n(6),De=n(12),Ie=n(13),_e=ke(),Re=(ke.json(),De.Schema),Me=new Re({name:String,count:Number,dateCreate:Date,isHide:Boolean},{versionKey:!1}),qe=new Re({idTimer:String,isActive:Boolean,limit:Number,dateStart:Date,dateStop:Date},{versionKey:!1}),Fe=De.model("Timer",Me),Ue=De.model("Story",qe);De.connect("mongodb://localhost:27017/time-counter",{useUnifiedTopology:!0,useNewUrlParser:!0}).then((function(){_e.listen(3e3,(function(){console.log("Сервер ожидает подключения - http://localhost:3000/")}))})).catch((function(e){console.log(e)}));var He=function(){var e=Ne(regeneratorRuntime.mark((function e(t,n,r){var a,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fe.find({});case 2:return a=e.sent,e.next=5,Ue.find({});case 5:o=e.sent,t.store=N(!0,{"сounters":a,story:o}),r();case 8:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),Be=Object(u.compose)((function(e){var t=e.html,n=e.state;return'\n  <!DOCTYPE html>\n  <html>\n  <head>\n  <meta charset="utf-8">\n  <title>Universal Color Organizer</title>\n  <link rel="stylesheet" href="style.css">\n  <link href="https://fonts.googleapis.com/css?family=Quantico&display=swap" rel="stylesheet">\n  </head>\n  <body>\n  <div id="root">'.concat(t,"</div>\n  <script>\n  window.__INITIAL_STATE__ = ").concat(JSON.stringify(n),'\n  <\/script>\n  <script src="/client.js"><\/script>\n  </body>\n  </html>\n  ')}),(function(e){var t=e.url,n=e.store;return{state:n.getState(),html:Object(o.renderToString)(a.a.createElement(c.Provider,{store:n},a.a.createElement(i.StaticRouter,{location:t,context:{}},a.a.createElement(ae,null))))}}),(function(e,t,n){return{store:N(!1,{"сounters":t,story:n}),url:e}})),Je=function(){var e=Ne(regeneratorRuntime.mark((function e(t,n){var r,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fe.find({});case 2:return r=e.sent,e.next=5,Ue.find({});case 5:return a=e.sent,e.abrupt("return",n.status(200).send(Be(t.url,r,a)));case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();_e.get("/api/users",(function(e,t){User.find({},(function(e,n){if(e)return console.log(e);t.send(n)}))})),_e.use(ke.static("public")).use(Ie()).use((function(e,t,n){console.log("".concat(e.method," request for '").concat(e.url,"'")),n()})).use(He).use("/api",Te).use(Je)}]);
//# sourceMappingURL=server.bundle.js.map